"use strict";(self.webpackChunkTask_app=self.webpackChunkTask_app||[]).push([[817],{3943:function(e,t,a){a.d(t,{Z:function(){return s}});a(2791);var n={Button:"Button_Button__gr25a",Success:"Button_Success__bQa0I",Danger:"Button_Danger__A5JK0"},r=a(184);function s(e){return(0,r.jsxs)("button",{className:[n.Button,n[e.type]].join(" "),disabled:!e.disable,children:[" ",e.children," "]})}},2385:function(e,t,a){a.d(t,{Z:function(){return i}});var n=a(1413),r=(a(2791),{Label:"Input_Label__gL+xR",Input:"Input_Input__7IJ8I",InputElement:"Input_InputElement__X1yVd",Invalid:"Input_Invalid__csHbb",textArea:"Input_textArea__JyqzH"}),s=a(184);function i(e){var t="";switch(e.type){case"text":case"number":default:t=(0,s.jsx)("input",(0,n.Z)((0,n.Z)({onChange:e.change,className:r.Input},e.eleconfig),{},{value:e.value}));break;case"textarea":t=(0,s.jsx)("textarea",(0,n.Z)((0,n.Z)({onChange:e.change,className:r.textArea},e.eleconfig),{},{value:e.value}));break;case"select":t=(0,s.jsx)("select",{onChange:e.change,className:r.InputElement,value:e.value,children:e.eleconfig.Options.map((function(e){return(0,s.jsx)("option",{className:r.Option,value:e.value,children:e.displayValue},e.value)}))})}return(0,s.jsxs)("div",{className:r.Input,children:[(0,s.jsx)("label",{className:r.Label,children:e.label}),t]})}},3875:function(e,t,a){a.d(t,{Z:function(){return c}});var n=a(5671),r=a(3144),s=a(9340),i=a(2882),o=a(2791),l="toast_Toast__7dqUI",u=a(184),c=function(e){(0,s.Z)(a,e);var t=(0,i.Z)(a);function a(){return(0,n.Z)(this,a),t.apply(this,arguments)}return(0,r.Z)(a,[{key:"render",value:function(){return(0,u.jsx)("div",{className:l,style:{transform:this.props.show?"translateY(0)":"translateY(-100vh)",opacity:this.props.show?"1":"0"},children:this.props.children})}}]),a}(o.Component)},6817:function(e,t,a){a.r(t),a.d(t,{default:function(){return b}});var n=a(4165),r=a(5861),s=a(4942),i=a(5671),o=a(3144),l=a(9340),u=a(2882),c=a(2791),f={profile:"profile_profile__sKiOe",ProfileImg:"profile_ProfileImg__pKQ9G",error:"profile_error__Nad7B",Button:"profile_Button__UNZ6p",form:"profile_form__b8+Yy"},m=a(2385),d=a(9266),p=a(3943),h=a(4569),g=a.n(h),v=a(3875),_=a(3452),x=a(8756),Z=a(184),y=function(e){(0,l.Z)(a,e);var t=(0,u.Z)(a);function a(){var e;(0,i.Z)(this,a);for(var o=arguments.length,l=new Array(o),u=0;u<o;u++)l[u]=arguments[u];return(e=t.call.apply(t,[this].concat(l))).state={file:"",imgsrc:null,msg:null,formData:{name:{eleType:"text",eleConfig:{type:"text",placeholder:"John"},value:"",validation:{min:7,max:25},valid:!0,changed:!1},password:{eleType:"text",eleConfig:{type:"text",placeholder:"password"},value:"",validation:{min:7,max:25},valid:!0,changed:!1},ConfirmPassword:{eleType:"text",eleConfig:{type:"text",placeholder:"confirm password"},value:"",validation:{min:7,max:25},valid:!0,changed:!1}},isValid:!1},e.changeHandler=function(t,a){var n=(0,d.Z)(e.state.formData,(0,s.Z)({},a,(0,d.Z)(e.state.formData[a],{value:t.target.value,changed:(0,x.Z)(t.target.value,e.state.formData[a].validation)}))),r=!1;for(var i in e.state.formData)r=e.state.formData[i].changed||r;e.setState({formData:n,isValid:r})},e.ToastHider=function(){setTimeout((function(){e.setState({msg:null})}),3e3)},e.uploadImage=(0,r.Z)((0,n.Z)().mark((function t(){var a;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(a=new FormData).append("avatar",e.state.file),g().post("/users/me/avatar",a,{headers:{"Content-Type":"multipart/form-data",Authorization:e.props.token}}).then((function(t){e.setState({msg:"Profile Updated Successfully"}),e.ToastHider()})).catch((function(t){return e.setState({msg:null})}));case 3:case"end":return t.stop()}}),t)}))),e.submitHandler=function(t){t.preventDefault();var a={};for(var n in e.state.formData)e.state.formData[n].changed&&(a[n]=e.state.formData[n].value);if(a.password!==a.ConfirmPassword)return e.setState({msg:"Password Must be same!"});delete a.ConfirmPassword,g().patch("/users/update",a,{headers:{Authorization:e.props.token}}).then((function(t){e.setState({msg:"Profile Updated Successfully"}),e.ToastHider()})).catch((function(t){return e.setState({msg:null})}))},e}return(0,o.Z)(a,[{key:"componentDidMount",value:function(){var e=this;g().get("/users/me/"+this.props.id+"/avatar").then((function(t){return e.setState({imgsrc:"/users/me/"+e.props.id+"/avatar"})})).catch((function(t){return e.setState({imgsrc:null})})),g().get("/users/me",{headers:{Authorization:this.props.token}}).then((function(t){var a=null;for(var n in e.state.formData){a=(0,d.Z)(e.state.formData,(0,s.Z)({},n,(0,d.Z)(e.state.formData[n],{value:t.data[n]})));break}e.setState({formData:a})}))}},{key:"render",value:function(){var e=this,t=[];for(var a in this.state.formData)t.push({key:a,title:a,config:this.state.formData[a]});return(0,Z.jsxs)(c.Fragment,{children:[(0,Z.jsxs)(v.Z,{show:this.state.msg,children:[" ",this.state.msg?this.state.msg:"Something Went Wrong"," "]}),(0,Z.jsxs)("div",{className:f.profile,children:[(0,Z.jsx)("div",{className:f.error,children:this.state.error}),(0,Z.jsxs)("div",{className:f.ProfileImg,children:[(0,Z.jsx)("img",{src:this.state.imgsrc?this.state.imgsrc:null,alt:"Upload img here",id:"ImageFile"}),(0,Z.jsx)("input",{type:"file",onChange:function(t){return function(t){t.target.files[0].size>1048576?e.setState({error:"Image size is too large max size is 1mb",imgsrc:null}):e.setState({imgsrc:URL.createObjectURL(t.target.files[0]),file:t.target.files[0]})}(t)}}),(0,Z.jsx)("button",{className:f.Button,onClick:this.uploadImage,disabled:null===this.state.imgsrc,children:" upload "})]}),(0,Z.jsxs)("form",{className:f.form,onSubmit:function(t){return e.submitHandler(t)},children:[t.map((function(t){return(0,Z.jsx)(m.Z,{type:t.config.eleType,eleconfig:t.config.eleConfig,value:t.config.value,label:t.title,change:function(a){return e.changeHandler(a,t.title)}},t.key)})),(0,Z.jsx)(p.Z,{type:"Success",className:f.Btn,disable:this.state.isValid,children:" Update "})]})]})]})}}]),a}(c.Component),b=(0,_.$j)((function(e){return{token:e.user.token,id:e.user.id}}))(y)},9266:function(e,t,a){var n=a(1413);t.Z=function(e,t){return(0,n.Z)((0,n.Z)({},e),t)}},8756:function(e,t,a){var n=a(2570),r=a.n(n);t.Z=function(e,t){return(!t.required||""!==e.trim(""))&&(!(t.isemail&&!r().isEmail(e))&&(!(e.length<t.min)&&!(e.length>t.max)))}}}]);
//# sourceMappingURL=817.2b4351f5.chunk.js.map